

rm -rf CMake*
ALBINSTALLDIR=
TRILINSTALLDIR=

cmake \
    -Wno-dev \
    -D CISM_MPI_MODE:BOOL=ON \
    -D CISM_SERIAL_MODE:BOOL=OFF \
    -D CISM_BUILD_CISM_DRIVER:BOOL=ON \
    -D CISM_USE_GPTL_INSTRUMENTATION:BOOL=OFF \
    -D CMAKE_VERBOSE_MAKEFILE:BOOL=ON \
    -D CISM_USE_TRILINOS:BOOL=ON \
    -D CISM_TRILINOS_DIR=${TRILINSTALLDIR} \
    -D ALBANY_LANDICE_DYCORE:BOOL=ON \
    -D ALBANY_LANDICE_CTEST:BOOL=ON \
    -D CISM_ALBANY_DIR=${CTEST_BINARY_DIRECTORY}/AlbanyInstall \
    -D CISM_ALBANY_DIR=${ALBINSTALLDIR} \
    -D CISM_NETCDF_DIR=${NETCDF_DIR} \
    -D CMAKE_CXX_COMPILER=CC \
    -D CMAKE_C_COMPILER=cc \
    -D CMAKE_Fortran_COMPILER=ftn \
    -D CMAKE_EXE_LINKER_FLAGS:STRING='-Wl,-zmuldefs' \
    -D BUILD_SHARED_LIBS:BOOL=ON \
    -D CISM_STATIC_LINKING:BOOL=OFF \
    -D CISM_Fortran_FLAGS='-ffree-line-length-none -Wno-argument-mismatch' \
    -D CMAKE_C_FLAGS:STRING='-O2 -std=c++17' \
    -D CMAKE_CXX_FLAGS:STRING='-O2 -std=c++17' \
    -D CMAKE_BUILD_TYPE:STRING=RELEASE \
../..
