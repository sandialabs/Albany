#!/bin/bash
rm -rf CMake*
SOURCE_DIR=/global/cfs/cdirs/e3sm/software/albany/source
INSTALL_DIR=/global/common/software/e3sm/albany/2024.03.26/gcc/11.2.0

TRILINOS_DIR=/global/common/software/e3sm/trilinos/15.1.1/gcc/11.2.0

cmake \
  -D ALBANY_TRILINOS_DIR:FILEPATH=${TRILINOS_DIR} \
  -D CMAKE_INSTALL_PREFIX:PATH=${INSTALL_DIR} \
  -D CMAKE_BUILD_TYPE:STRING=RELEASE \
  -D CMAKE_CXX_COMPILER=CC \
  -D ENABLE_DEMO_PDES:BOOL=OFF \
  -D ENABLE_LANDICE:BOOL=ON \
  -D ENABLE_MESH_DEPENDS_ON_PARAMETERS:BOOL=OFF \
  -D BUILD_SHARED_LIBS:BOOL=ON \
  -D Albany_BUILD_STATIC_EXE:BOOL=OFF \
  -D ENABLE_FAD_TYPE:STRING="SFad" \
  -D ALBANY_SFAD_SIZE=12 \
  -D ENABLE_MPAS_INTERFACE:BOOL=ON \
  ${SOURCE_DIR}

